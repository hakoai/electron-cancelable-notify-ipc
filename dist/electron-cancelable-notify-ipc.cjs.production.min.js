"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("electron"),n=require("uuid");function r(e){return{handle:function(n,r){e.removeAllListeners(n),e.on(n,(function(n,t){n.sender.send(t.act);for(var o=new Promise((function(n){e.once(t.cancel,(function(e,r){n(r)}))})),c=arguments.length,i=new Array(c>2?c-2:0),a=2;a<c;a++)i[a-2]=arguments[a];r.apply(void 0,[n,function(){for(var e,r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];(e=n.sender).send.apply(e,[t.notify].concat(o))},o].concat(i)).then((function(e){var r;(r=n.sender).send.apply(r,[t.responce].concat(e))})).finally((function(){e.removeAllListeners(t.cancel)}))}))},removeAllListeners:function(n){e.removeAllListeners(n)}}}function t(e){var r=e+"-"+n.v1();return{act:r+"-act",notify:r+"-notify",cancel:r+"-cancel",responce:r+"-responce"}}function o(e){function n(n,r,o){for(var c=arguments.length,i=new Array(c>3?c-3:0),a=3;a<c;a++)i[a-3]=arguments[a];var l=t(n);return[function(){for(var n=arguments.length,r=new Array(n),t=0;t<n;t++)r[t]=arguments[t];e.send.apply(e,[l.cancel].concat(r))},new Promise((function(t,c){var a=!1,s=!1;e.once(l.act,(function(){return a=!0})),e.on(l.notify,(function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),o=1;o<n;o++)t[o-1]=arguments[o];r.apply(void 0,t)})),e.once(l.responce,(function(n){if(!s){s=!0,e.removeAllListeners(l.act),e.removeAllListeners(l.notify);for(var r=arguments.length,o=new Array(r>1?r-1:0),c=1;c<r;c++)o[c-1]=arguments[c];t(o)}})),setTimeout((function(){a||s||(s=!0,e.removeAllListeners(l.act),e.removeAllListeners(l.notify),e.removeAllListeners(l.responce),c(new Error("ipc timeout.")))}),o),e.send.apply(e,[n,l].concat(i))}))]}return{invokeWithTimeOut:n,invoke:function(e,r){for(var t=arguments.length,o=new Array(t>2?t-2:0),c=2;c<t;c++)o[c-2]=arguments[c];return n.apply(void 0,[e,r,1e3].concat(o))}}}var c=r(e.ipcMain),i=o(e.ipcRenderer);exports.ipcMain=c,exports.ipcRenderer=i;
//# sourceMappingURL=electron-cancelable-notify-ipc.cjs.production.min.js.map
