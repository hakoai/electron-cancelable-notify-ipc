"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("electron"),n=require("uuid");function r(e){return{handle:function(n,r,o){e.removeAllListeners(n),e.on(n,(function(n,t){n.sender.send(t.act);var c=new Promise((function(n){e.once(t.cancel,(function(e,r){n(r)}))}));try{for(var i=arguments.length,s=new Array(i>2?i-2:0),l=2;l<i;l++)s[l-2]=arguments[l];r.apply(void 0,[n,function(){for(var e,r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];(e=n.sender).send.apply(e,[t.notify].concat(o))},c].concat(s)).then((function(e){var r;(r=n.sender).send.apply(r,[t.responce].concat(e))})).catch((function(e){n.sender.send(t.error,e),o(e)})).finally((function(){e.removeAllListeners(t.cancel)}))}catch(r){e.removeAllListeners(t.cancel),n.sender.send(t.error,r),o(r)}}))},removeAllListeners:function(n){e.removeAllListeners(n)}}}function o(e){var r=e+"-"+n.v1();return{act:r+"-act",notify:r+"-notify",cancel:r+"-cancel",responce:r+"-responce",error:r+"-error"}}function t(e){function n(n,r,t){for(var c=arguments.length,i=new Array(c>3?c-3:0),s=3;s<c;s++)i[s-3]=arguments[s];var l=o(n);return[function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];e.send.apply(e,[l.cancel].concat(r))},new Promise((function(o,c){var s=!1,a=!1;e.once(l.act,(function(){return s=!0})),e.on(l.notify,(function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),t=1;t<n;t++)o[t-1]=arguments[t];r.apply(void 0,o)})),e.once(l.responce,(function(n){if(!a){a=!0,e.removeAllListeners(l.act),e.removeAllListeners(l.notify),e.removeAllListeners(l.error);for(var r=arguments.length,t=new Array(r>1?r-1:0),c=1;c<r;c++)t[c-1]=arguments[c];o(t)}})),e.once(l.error,(function(n,r){a||(a=!0,e.removeAllListeners(l.act),e.removeAllListeners(l.notify),e.removeAllListeners(l.responce),c(r))})),setTimeout((function(){s||a||(a=!0,e.removeAllListeners(l.act),e.removeAllListeners(l.notify),e.removeAllListeners(l.responce),e.removeAllListeners(l.error),c(new Error("ipc act timeout.")))}),t),e.send.apply(e,[n,l].concat(i))}))]}return{invokeWithTimeOut:n,invoke:function(e,r){for(var o=arguments.length,t=new Array(o>2?o-2:0),c=2;c<o;c++)t[c-2]=arguments[c];return n.apply(void 0,[e,r,1e3].concat(t))}}}var c=r(e.ipcMain),i=t(e.ipcRenderer);exports.ipcMain=c,exports.ipcRenderer=i;
//# sourceMappingURL=electron-cancelable-notify-ipc.cjs.production.min.js.map
